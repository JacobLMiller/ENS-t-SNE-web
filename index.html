<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
  <!-- Own CSS -->
  <link rel="stylesheet" href="style.css">

  <title>ENS-t-sne</title>
</head>


<div class="container-fluid" id="main-body">
    <div class="row" id="main">
         <div class="col-2" id="sidebar" style="height: 100px;">
            <label for="data">Choose a dataset:</label>
            <select name="data" id="data">
                <option value="penguins">Palmer's Penguins</option>
                <option value="synthetic1">Synthetic 1</option>
                <option value="synthetic2">Synthetic 2</option>
                <option value="food">USDA Food Composition</option>
                <option value="auto">Auto-mpg</option>
            </select>
             <!-- <div class="interpcontainer">
                 <input style="width: 100%;" type="range" min="0" max="1000" value="0" class="slider" id="interp-value"> 
                 <p id="interp-text" style="text-align: center;"></p>
             </div>          
             <div class="play">
                <button id="playButton">play</button>
             </div> -->
         </div>

         <div class="col-10" >
             <svg id="data-view" style="width: 32%; height: 500px; border: 1px solid black;"></svg>
             <svg id="view-1" style="width: 32%; height: 500px;  border: 1px solid black;"></svg>
             <svg id="view-2" style="width: 32%; height: 500px;  border: 1px solid black;"></svg>
         </div>
     </div>
</div>

<script src="https://d3js.org/d3.v7.min.js"></script>

<script src="3d_visualization.js"></script>
<script src="2d_visualization.js"></script>

<script>
    var ready = (callback) => {
        if (document.readyState != "loading") callback();
        else document.addEventListener("DOMContentLoaded", callback);
      }

    var dataview;
    var view1;
    var view2;
    var data_select = document.getElementById("data");

    ready(() => { 

        var data_name = data_select.value;
        var script = document.createElement('script');
        script.onload = function() {

            dataView = new Vis3d("#data-view", data);
            dataView.draw();

            view1 = new Vis2d("#view-1", data, 0);
            view1.draw(); 

            view2 = new Vis2d("#view-2", data, 1);
            view2.draw();

            // setInterval(() => {
            //     dataView.test();
            // },50)
        }

        script.id = "data_script";
        script.src = `${data_name}_data.js`;
        document.head.appendChild(script);

    });

    data_select.addEventListener("change", () => {
        
        var data_name = data_select.value;
        var script = document.getElementById('data_script');
        script.src = `${data_name}_data.js`;

        dataview.newData(data);
        dataview.draw();

        view1.newData(data);
        view1.draw();

        view2.newData(data);
        view2.draw();
     
    })

</script>
